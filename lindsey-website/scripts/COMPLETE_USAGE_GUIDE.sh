#!/bin/bash
# Artwork Merge Script - Complete Usage Guide
# Updated: January 2, 2026

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘        Artwork Merge Script - Complete Usage Guide                â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âœ… SCRIPT IS READY TO USE!"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“‹ PREREQUISITES (Already Done)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "  âœ“ Script fixed to find .env files in project root"
echo "  âœ“ Script fixed to find Images directory correctly"
echo "  âœ“ Category formatting implemented (no spaces, title case)"
echo "  âœ“ Featured artworks configured (Maypole Unicorn, Christmas Animals)"
echo "  âœ“ Date conversion working (year â†’ DATE format)"
echo "  âœ“ All 68 artworks validated with 0 errors"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸš€ HOW TO RUN (from scripts/ directory OR project root)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "1ï¸âƒ£  DRY RUN (recommended first - shows what will happen):"
echo "    cd scripts"
echo "    python3 merge_artworks.py --env dev --dry-run"
echo ""
echo "2ï¸âƒ£  DRY RUN with detailed output:"
echo "    python3 merge_artworks.py --env dev --dry-run --verbose"
echo ""
echo "3ï¸âƒ£  ACTUAL IMPORT (development database):"
echo "    python3 merge_artworks.py --env dev"
echo ""
echo "4ï¸âƒ£  ACTUAL IMPORT (production database):"
echo "    python3 merge_artworks.py --env prod"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ¨ WHAT THE SCRIPT DOES"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“ Reads Data:"
echo "   â€¢ Scans all 68 artwork directories in backend/src/main/resources/Images/"
echo "   â€¢ Parses .txt files for metadata"
echo "   â€¢ Finds LARGEST .jpg for large_image_url"
echo ""
echo "ğŸ¨ Formats Categories:"
echo "   â€¢ Input:  'acrylic, painting, paint pouring, insects, abstract'"
echo "   â€¢ Output: 'Acrylic,Painting,Paint Pouring,Insects,Abstract'"
echo "   â€¢ No spaces after commas, title case for each word"
echo "   â€¢ Original .txt files unchanged"
echo ""
echo "ğŸ’¾ Inserts to Database:"
echo "   â€¢ Uses PostgreSQL UPSERT (safe to run multiple times)"
echo "   â€¢ Sets is_featured=TRUE only for Maypole Unicorn & Christmas Animals"
echo "   â€¢ Converts years to proper DATE format (e.g., '2024' â†’ '2024-01-01')"
echo "   â€¢ Sets created_at and updated_at timestamps"
echo "   â€¢ Parses prices and determines for_sale status"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ” VERIFY RESULTS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Check total count:"
echo "  docker exec lindsey-website-postgres-1 psql -U toadMan -d lindseydb \\"
echo "    -c 'SELECT COUNT(*) FROM artworks;'"
echo ""
echo "View featured artworks:"
echo "  docker exec lindsey-website-postgres-1 psql -U toadMan -d lindseydb \\"
echo "    -c \"SELECT title, is_featured FROM artworks WHERE is_featured = TRUE;\""
echo ""
echo "Check category formatting:"
echo "  docker exec lindsey-website-postgres-1 psql -U toadMan -d lindseydb \\"
echo "    -c \"SELECT title, categories FROM artworks LIMIT 5;\""
echo ""
echo "View a specific artwork:"
echo "  docker exec lindsey-website-postgres-1 psql -U toadMan -d lindseydb \\"
echo "    -c \"SELECT * FROM artworks WHERE title = 'The Christmas Animals';\""
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ¯ FRONTEND INTEGRATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "TypeScript Example:"
echo "  const categories = artwork.categories.split(',');"
echo "  // ['Acrylic', 'Painting', 'Paint Pouring', 'Nature']"
echo ""
echo "Filter by category:"
echo "  const filtered = artworks.filter(art => "
echo "    art.categories.split(',').includes('Acrylic')"
echo "  );"
echo ""
echo "Get all unique categories:"
echo "  const allCategories = new Set("
echo "    artworks.flatMap(art => art.categories.split(','))"
echo "  );"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ› ï¸  TROUBLESHOOTING"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Error: 'Environment file not found'"
echo "  â†’ Make sure .env.dev or .env.prod exists in project root"
echo "  â†’ Script now looks in parent directory automatically"
echo ""
echo "Error: 'connection refused'"
echo "  â†’ Start postgres: docker compose up -d postgres"
echo "  â†’ Wait a few seconds for postgres to start"
echo ""
echo "Error: 'No valid artwork directories found'"
echo "  â†’ Check that Images directory exists"
echo "  â†’ Path should be: backend/src/main/resources/Images/"
echo ""
echo "Error: 'ModuleNotFoundError: psycopg2'"
echo "  â†’ Install: pip3 install psycopg2-binary python-dotenv"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“š Documentation:"
echo "   â€¢ scripts/MERGE_SCRIPT_SUMMARY.md"
echo "   â€¢ scripts/CATEGORY_FORMATTING_GUIDE.md"
echo ""
echo "ğŸ‰ YOU'RE READY TO GO!"
echo ""

