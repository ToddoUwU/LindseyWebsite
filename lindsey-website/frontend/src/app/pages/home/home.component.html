<main class="home-page">
  @if (loading()) {
    <div class="loading-state">
      <mat-spinner diameter="48"></mat-spinner>
      <p>Loading artworks...</p>
    </div>
  } @else if (error()) {
    <div class="error-state">
      <mat-icon>error</mat-icon>
      <p>{{ error() }}</p>
    </div>
  } @else {
    <!-- Featured Artwork Slider -->
    @if (featuredArtworks().length > 0) {
      <app-carousel [featuredArtworks]="featuredArtworks()"></app-carousel>
    }

    <!-- Available Artwork Section -->
    <section class="available-artwork-section">
      <div class="section-header">
        <h2 class="section-title">Available Artwork</h2>

        <!-- Active Filters Summary -->
        @if (activeFilterEnabled()) {
          <div class="filter-summary">
            <p class="filter-indicator">
              <mat-icon>filter_list</mat-icon>
              Showing: <span class="filter-text">{{ getActiveFilterSummary() }}</span>
              <span class="result-count">({{ filteredArtworksForSale().length }} results)</span>
            </p>
            <button
              mat-flat-button
              color="secondary"
              (click)="clearAllFilters()"
              class="clear-all-button">
              <mat-icon>clear</mat-icon>
              Clear All
            </button>
          </div>
        }

        <!-- Filter Component -->
        <app-artwork-filter
          [categories]="categories()"
          [dimensions]="dimensions()"
          [mediums]="mediums()"
          [activeFilters]="activeFilters()"
          (filtersChanged)="onFiltersChanged($event)"
        />
      </div>



      <div class="artwork-grid" aria-label="Available artworks gallery">
        @for (artwork of filteredArtworksForSale(); track artwork.id) {
          <app-artwork-card
            (artworkSelected)="onArtworkSelected($event)"
            [artwork]="artwork"
          />
        } @empty {
          <div class="empty-state">
            <mat-icon>image_not_supported</mat-icon>
            @if (activeFilterEnabled()) {
              <p>No artworks match your current filters.</p>
              <button
                mat-flat-button
                color="primary"
                (click)="clearAllFilters()">
                Clear Filters
              </button>
            } @else {
              <p>No artworks available at this time.</p>
            }
          </div>
        }
      </div>
    </section>
  }
</main>

<!-- Artwork Dialog -->
<app-artwork-dialog/>
