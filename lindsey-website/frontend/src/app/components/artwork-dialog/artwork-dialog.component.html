@if (artwork()) {
  <div
    (click)="onBackdropClick($event)"
    (keydown)="onKeyDown($event)"
    [attr.aria-labelledby]="'dialog-title-' + artwork()!.id"
    [class.closing]="isClosing()"
    [class.full-size-mode]="showFullSize()"
    aria-modal="true"
    class="dialog-backdrop"
    role="dialog">
    <div class="dialog-container" [class.full-size]="showFullSize()">
      <!-- Close Button -->
      <button
        mat-icon-button
        (click)="close()"
        aria-label="Close dialog"
        class="close-button">
        <mat-icon>close</mat-icon>
      </button>

      <!-- Full Size View -->
      @if (showFullSize()) {
        <div class="full-size-view">
          <img
            [alt]="artwork()!.title"
            [ngSrc]="getLargeImageUrl()"
            [width]="getLargeImageWidth()"
            [height]="getLargeImageHeight()"
            class="full-size-image"
          />
          <div class="full-size-controls">
            <button
              mat-fab
              (click)="toggleFullSize()"
              class="back-button">
              <mat-icon>arrow_back</mat-icon>
              Back
            </button>
            <button
              mat-fab
              (click)="openFullSizeInNewTab()"
              (dblclick)="openFullSizeInNewTab()"
              class="new-tab-button">
              <mat-icon>open_in_new</mat-icon>
              New Tab
            </button>
          </div>
        </div>
      } @else {
        <!-- Normal Dialog View -->
        <div class="dialog-content">
          <div class="image-section">
            <div
              class="image-container"
              (click)="toggleFullSize()"
              (keydown.enter)="toggleFullSize()"
              tabindex="0"
              role="button"
              aria-label="Click to view full size image">
              <button
                mat-fab
                (click)="goToShop()"
                aria-label="Go to shop for this artwork"
                class="shop-button">
                <mat-icon>shop</mat-icon>
              </button>
              <img
                [alt]="artwork()!.title"
                [ngSrc]="getMediumImageUrl()"
                [width]="getMediumImageWidth()"
                [height]="getMediumImageHeight()"
                class="artwork-image"
              />
              <div class="image-overlay">
                <mat-icon>zoom_in</mat-icon>
                <span>View Full Size</span>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h2 [id]="'dialog-title-' + artwork()!.id" class="artwork-title">
              {{ artwork()!.title }}
            </h2>

            @if (getYear()) {
              <p class="artwork-year">{{ getYear() }}</p>
            }

            <p class="artwork-medium">{{ artwork()!.medium }}</p>

            @if (artwork()!.dimensions) {
              <p class="artwork-dimensions">{{ artwork()!.dimensions }}</p>
            }

            <p class="artwork-description">{{ artwork()!.artDescription }}</p>

            @if (getCategories().length > 0) {
              <div class="artwork-category">
                <mat-icon>category</mat-icon>
                <p>
                {{ getCategories().join(', ') }}</p>
              </div>
            }

            @if (artwork()!.location) {
              <div class="artwork-location">
                <mat-icon>location_on</mat-icon>
                {{ artwork()!.location }}
              </div>
            }

            <!-- Original Artwork Price Section -->
            <div class="artwork-price-section">
              @if (!artwork()!.forSale) {
                <span class="sold-status">
                  <mat-icon>sell</mat-icon>
                  Original Sold
                </span>
              } @else if (artwork()!.originalPrice) {
                <div class="original-price-info">
                  <span class="price-label">Original Artwork</span>
                  <span class="price">${{ artwork()!.originalPrice | number }}</span>
                </div>
                <button mat-flat-button color="primary" class="inquire-button" (click)="showInquiryDialog()">
                  <mat-icon>mail</mat-icon>
                  Inquire About Original
                </button>
              }
            </div>

            <!-- Shop Button Section -->
            <div class="shop-full-button-section">
              <button mat-flat-button class="shop-full-button" (click)="goToShop()">
                <mat-icon>shop</mat-icon>
                Shop Prints and More!
              </button>
            </div>
          </div>
        </div>
      }
    </div>
  </div>
}

<app-inquiry-dialog></app-inquiry-dialog>
